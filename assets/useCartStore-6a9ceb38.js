import{a as c}from"./axios-3a76d256.js";import{m as i,g as h,q as p}from"./index-df55983b.js";const u=i("LoaderStore",()=>{const a=h(!1);return{isLoading:a,changeIsLoading:d=>{a.value=d}}}),{VITE_API_BASE:r,VITE_API_PATH:g}={VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"hexschool-billyji",BASE_URL:"/vue-2023-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E=i("cartStore",()=>{const a=u(),l=h({carts:[]}),d=p(()=>l.value.carts.length),o=()=>{const t=`${r}/api/${g}/cart`;a.changeIsLoading(!0),c.get(t).then(e=>{l.value=e.data.data,a.changeIsLoading(!1)}).catch(e=>{console.log(e),a.changeIsLoading(!1)})};return{cartData:l,cartsLength:d,getCart:o,addToCart:(t,e=1)=>{const s=`${r}/api/${g}/cart/`;a.changeIsLoading(!0),c.post(s,{data:{product_id:t,qty:e}}).then(n=>{o(),alert(n.data.message),a.changeIsLoading(!1)}).catch(n=>{console.log(n),a.changeIsLoading(!1)})},deleteCartItem:t=>{const e=`${r}/api/${g}/cart/${t}`;a.changeIsLoading(!0),c.delete(e).then(()=>{o(),a.changeIsLoading(!1)}).catch(s=>{console.log(s),a.changeIsLoading(!1)})},deleteCarts:()=>{alert("是否要刪除所有購物車項目？");const t=`${r}/api/${g}/carts`;a.changeIsLoading(!0),c.delete(t).then(()=>{o(),a.changeIsLoading(!1)}).catch(e=>{console.log(e),a.changeIsLoading(!1)})},updateCartItem:(t,e,s)=>{const n=`${r}/api/${g}/cart/${t}`;a.changeIsLoading(!0);const I={product_id:e,qty:s};c.put(n,{data:I}).then(()=>{o(),a.changeIsLoading(!1)}).catch(L=>{console.log(L),a.changeIsLoading(!1)})}}});export{u as a,E as u};
