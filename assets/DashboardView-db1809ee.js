import{s as v,g as f,o as k,r as _,a as u,c as x,e,b as c,w as l,j as w,y as g,z as b,F as V,d as i}from"./index-df55983b.js";import{a as r}from"./axios-3a76d256.js";const A={class:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap shadow navbar-expand px-4"},E=e("a",{href:"#",class:"navbar-brand col-sm-3 col-md-2 mr-0 active text-left"},"後台管理頁面",-1),R={class:"ms-auto"},B={class:"navbar-nav"},I={class:"nav-item text-nowrap"},S={class:"nav-item text-nowrap"},T={class:"page-admin"},P={class:"container-fluid"},$={class:"row"},C={class:"col-lg-2 col-md-3 nav flex-column min-vh-100"},D={class:"col-lg-10 col-md-9 px-4"},M={__name:"DashboardView",setup(N){const a=v(),{VITE_API_BASE:d}={VITE_API_BASE:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"hexschool-billyji",BASE_URL:"/vue-2023-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},n=f(!1),h=()=>{const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(r.defaults.headers.common.Authorization=o,o){const s=`${d}/api/user/check`;r.post(s,{}).then(()=>{n.value=!0}).catch(function(t){n.value=!1,alert("請重新登入"),a.push("/login")})}else alert("請重新登入"),a.push("/login")},p=()=>{const o=`${d}/logout`;r.post(o).then(()=>{alert("已登出"),a.push("/")}).catch(s=>{console.log(s)})};return k(()=>{h()}),(o,s)=>{const t=_("RouterLink"),m=_("RouterView");return u(),x(V,null,[e("nav",A,[E,e("div",R,[e("ul",B,[e("li",I,[c(t,{to:"/",class:"nav-link active"},{default:l(()=>[i("回首頁")]),_:1})]),e("li",S,[e("a",{href:"#",class:"nav-link",onClick:w(p,["prevent"])},"登出")])])])]),e("div",T,[e("div",P,[e("div",$,[e("nav",C,[c(t,{to:"/admin/products",class:"nav-link font-weight-bold active"},{default:l(()=>[i(" 產品列表 ")]),_:1}),c(t,{to:"/admin/coupons",class:"nav-link font-weight-bold"},{default:l(()=>[i(" 優惠券列表 ")]),_:1})]),e("div",D,[n.value?(u(),g(m,{key:0})):b("",!0)])])])])],64)}}};export{M as default};
